<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Struk Hybrid</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <style>
    body { font-family: Arial; font-size:10px; margin:0; padding:5px; width:58mm; }
    .struk { width:100%; padding:2px; }
    h3,p { margin:2px 0; text-align:center; }
    .left { text-align:left; }
    pre { font-size:10px; white-space:pre-wrap; word-wrap:break-word; margin:2px 0; }
    hr { border:0; border-top:1px dashed #000; margin:3px 0; }
    .logo { display:block; margin:0 auto 5px auto; width:50px; }
  </style>
</head>
<body>
  <div class="struk" id="struk">
    {{STRUK_CONTENT}}
  </div>

  <script>
    window.onload = function(){
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF({ unit:'mm', format:[58,2000] }); // tinggi besar supaya auto-fit
      const strukDiv = document.getElementById('struk');

      doc.html(strukDiv, {
        x:0, y:0,
        callback: function(pdf){
          pdf.save("Struk.pdf"); // langsung download, tidak buka tab baru
        }
      });
    }
  </script>
</body>
</html>
