<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Struk Transaksi</title>
  <style>
    @page { size: 58mm auto; margin: 0; }

    body {
      font-family: Arial, sans-serif;
      font-size: 10px;
      margin: 0;
      padding: 0;
      background: #fff;
    }

    .content {
      width: 100%;       /* teks tidak kepotong */
      padding: 2px 3px;  /* pas kiri-kanan */
      margin: 0 auto;
      background: #fff;
      box-shadow: 0 0 10px #eee;
    }

    hr { border: 0; border-top: 1px dashed #000; margin: 5px 0; }
    .logo { display: block; margin: 0 auto 5px auto; }
    h3#NamaUsaha {
      text-align: center;
      font-size: 12px;
      margin: 2px 0;
      font-weight: bold;
    }
    h3, p { text-align: center; margin: 2px 0; }
    .left { text-align: left; }

    /* semua pre, span, p, left tetap 10px */
    pre, span, p, .left { 
      font-size: 10px; 
      white-space: pre-wrap;  /* teks panjang otomatis pindah baris */
      word-wrap: break-word;
    }

    /* pengaturan khusus saat print */
    @media print {
      body {
        width: 58mm;  /* sesuai printer thermal */
        margin: 0;
      }
      .content {
        width: 100%;
        padding: 2px 3px; /* pas kiri-kanan */
        box-shadow: none; /* hilangkan shadow saat print */
      }
      hr { margin: 3px 0; }
    }
  </style>
</head>
<body>
  <div class="content">
    <img class="logo" id="LogoUsaha" src="" alt="Logo Usaha" width="50" />
    <h3 id="NamaUsaha"></h3>
    <p id="AlamatUsaha"></p>
    <hr>
    <p class="left">Tanggal : <span id="Tanggal"></span></p>
    <p class="left">Kasir   : <span id="NamaPelanggan"></span></p>
    <p class="left">Metode  : <span id="MetodePembayaran"></span></p>
    <hr>
    <pre id="RincianCetak"></pre> <!-- tetap sama, data aman -->
    <hr>
    <p class="left">TOTAL     : <span id="TotalTagihan"></span></p>
    <p class="left">DIBAYAR   : <span id="TotalPembayaran"></span></p>
    <p class="left">KEMBALIAN : <span id="Kembalian"></span></p>
    <hr>
    <p id="CatatanPenjualan"></p>
  </div>

  <script>
    const p = new URLSearchParams(window.location.search);
    document.getElementById('LogoUsaha').src          = p.get('LogoUsaha')          || "";
    document.getElementById('NamaUsaha').innerText    = p.get('NamaUsaha')          || "";
    document.getElementById('AlamatUsaha').innerText  = p.get('AlamatUsaha')        || "";
    document.getElementById('Tanggal').innerText      = p.get('Tanggal')            || "";
    document.getElementById('NamaPelanggan').innerText= p.get('NamaPelanggan')      || "";
    document.getElementById('MetodePembayaran').innerText = p.get('MetodePembayaran') || "";
    document.getElementById('RincianCetak').innerText = p.get('RincianCetak')       || "";
    document.getElementById('TotalTagihan').innerText = p.get('TotalTagihan')       || "";
    document.getElementById('TotalPembayaran').innerText = p.get('TotalPembayaran') || "";
    document.getElementById('Kembalian').innerText    = p.get('Kembalian')          || "";
    document.getElementById('CatatanPenjualan').innerText = p.get('CatatanPenjualan') || "";
  </script>
</body>
</html>

